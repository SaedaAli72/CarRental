@using CarRentalDAL.Enums
@model IEnumerable<CarRentalBLL.ViewModels.Payment.Paymentcard>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}
@section Styles {
    <link rel="stylesheet" href="~/css/PaymentDashboard.css">
}


<div class="my-3 p-2">
    <div class="page-header mb-4">
        <h1 class="page-title">Payments</h1>
        <p class="page-subtitle">Track all payment transactions</p>
    </div>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-info">
                @{
                    var totalAmount = Model.Sum(p => p.Amount);
                }
                <h3>@totalAmount $</h3>
                <div class="stat-label">Total Revenue</div>
            </div>
            <div class="stat-icon success">
                <i class="fas fa-dollar-sign"></i>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-info">
                @{
                    var completedPayments = Model.Count(p => p.Status == PaymentStatus.Completed);
                }
                <h3>@completedPayments</h3>
                <div class="stat-label">Completed Payments</div>
            </div>
            <div class="stat-icon primary">
                <i class="fas fa-check-circle"></i>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-info">
                    @{
                        var pendingPayments = Model.Count(p => p.Status == PaymentStatus.Pending);
                }
                <h3>@pendingPayments</h3>
                <div class="stat-label">Pending Payments</div>
            </div>
            <div class="stat-icon warning">
                <i class="fas fa-clock"></i>
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-body p-0">
            <table class="table">
                <thead>
                    <tr>
                        <th>Payment ID</th>
                        <th>Rental ID</th>
                        <th>Customer</th>
                        <th>Amount</th>
                        <th>Payment Type</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                    
                    <tr>
                        <td><strong>@item.Id</strong></td>
                        <td>@item.RentalId</td>
                        <td> @item.CustomerUser </td>
                        <td><strong>@item.Rental.Car.PricePerDay</strong></td>
                            <td>
                                <span class="badge badge-primary">
                                    @item.PaymentType
                                </span>
                            </td>
                            <td>@item.PaymentDate.Date</td>
                            <td>
                                @switch (item.Status)
                                {
                                    case PaymentStatus.Completed:
                                        <span class="badge badge-success">Completed</span>
                                        break;

                                    case PaymentStatus.Pending:
                                        <span class="badge badge-warning">Pending</span>
                                        break;

                                    case PaymentStatus.Failed:
                                        <span class="badge badge-danger">Failed</span>
                                        break;

                                    default:
                                        <span class="badge badge-secondary">Unknown</span>
                                        break;
                                }
                            </td>
                            <td>
                                <a asp-action="Details"
                                   asp-route-id="@item.Id"
                                   class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    }
                   
                </tbody>
            </table>
        </div>
    </div>
</div>





























