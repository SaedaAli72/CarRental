@model CarRentalBLL.ViewModels.Review.CreateReviewVM

@section Styles {
    <link rel="stylesheet" href="~/css/add-review.css" />
}

@{
    ViewData["Title"] = "Reviews";
}

<!-- Page Header -->
<section class="page-header">
    <div class="container">
        <h1 class="page-title">Customer Reviews</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a asp-controller="Home" asp-action="Index"
                       style="color: rgba(255,255,255,0.8); text-decoration:none;">
                        Home
                    </a>
                </li>
                <li class="breadcrumb-item active">Reviews</li>
            </ol>
        </nav>
    </div>
</section>

<!-- Reviews Section -->
<section class="reviews-section">
    <div class="container">
        <div class="row">

            <!-- LEFT -->
            <div class="col-lg-8">

                <!-- Add Review Card -->
                <div class="add-review-card">
                    <h3 class="card-title">Write a Review</h3>

                    <form asp-action="AddReview" method="post">

                        <div asp-validation-summary="All" class="text-danger mb-3"></div>

                        <!-- Rating -->
                        <div class="mb-3">
                            <label class="form-label">Your Rating</label>

                            <div class="star-rating" id="starRating">
                                @for (int i = 1; i <= 5; i++)
                                {
                                    <i class="fas fa-star star" data-rating="@i"></i>
                                }
                            </div>

                            <input asp-for="Score" type="hidden" id="ratingInput" />
                            <span asp-validation-for="Score" class="text-danger"></span>
                        </div>

                        <!-- Title -->
                        <div class="mb-3">
                            <label asp-for="Title" class="form-label"></label>
                            <input asp-for="Title" class="form-control"
                                   placeholder="Summarize your experience" />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>

                        <!-- Text -->
                        <div class="mb-3">
                            <label asp-for="Text" class="form-label"></label>
                            <textarea asp-for="Text" rows="5" class="form-control"
                                      placeholder="Share your experience with this car..."></textarea>
                            <span asp-validation-for="Text" class="text-danger"></span>
                        </div>

                        <!-- Hidden -->
                        <input asp-for="CustomerId" type="hidden" />
                        <input asp-for="CarId" type="hidden" />

                        <button type="submit" class="btn btn-primary-custom">
                            Submit Review
                        </button>
                    </form>
                </div>

               

            

        </div>
    </div>
</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        const stars = document.querySelectorAll('.star');
        const ratingInput = document.getElementById('ratingInput');

        stars.forEach(star => {
            star.addEventListener('click', function () {
                const rating = this.dataset.rating;
                ratingInput.value = rating;

                stars.forEach(s => {
                    s.classList.toggle('active', s.dataset.rating <= rating);
                });
            });
        });
    </script>
}
